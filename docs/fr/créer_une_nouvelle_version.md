#Créer une nouvelle version d’un jeu de données

Pour mettre à jour les fichiers dans un jeu de données publié, on peut créer une nouvelle version. Le Dépôt fédéré de données de recherche (DFDR) produit alors une copie de votre jeu de données publié qu’il vous donne la permission de modifier. Une fois vos révisions terminées, la nouvelle version fera l’objet d’un processus de curation et de préservation, comme s’il s’agissait d’un tout nouveau jeu de données. La plupart du temps, pour des raisons de transparence envers quiconque aurait consulté ou utilisé vos fichiers de données, l’ancienne version de votre jeu de données demeure accessible même après la publication de sa nouvelle version.

Le DFDR attribue un identifiant numérique d’objet (DOI) à votre nouvelle version. Pour sa part, le DOI d’origine demeure fonctionnel : il conduit au jeu de données d’origine, où s’affichera désormais une bannière menant à la dernière version en date. Le DFDR lie aussi les différentes versions dans le registre de métadonnées, et toutes les versions du jeu de données comportent un tableau qui liste toutes les versions disponibles et résume les changements.

<strong>Si les changements ne concernent que les métadonnées (ex. : lien vers un article publié, ordre des auteurs, amélioration de la description du jeu de données), ou si un problème nécessite le retrait total d’un fichier dans toutes les versions, veuillez nous écrire à [support@frdr-dfdr.ca](mailto:support@frdr-dfdr.ca)</strong>. Nous vous demandons aussi de communiquer avec nous s’il faut modifier les fichiers dans un jeu de données sous embargo ou en évaluation à l’externe (autrement dit, si le jeu de données n’est pas encore publié).

Avant d’apporter un nombre important de changements dans un jeu de données massif, veuillez écrire à l’équipe de service du DFDR à [support@frdr-dfdr.ca;](mailto:support@frdr-dfdr.ca) elle se fera un plaisir de vous conseiller sur la meilleure façon de s’y prendre.

<div class="card-shadow mb-5">
    <div class="card-body" style="padding: 0em;">
        <div class="d-none d-xl-flex row pt-2 pb-2 ml-0 mr-0 dark-header" style="gap: 0;">
            <div class="col-3 col-xl-3">État de traitement</div>
            <div class="col-3 col-xl-3">Modification à faire</div>
            <div class="col-6 col-xl-6">Procédure</div>
        </div>
        <div class="row pt-2 pb-2 ml-0 mr-0">
            <div class="cell col-3 col-xl-3">En cours (soumission non terminée)</div>
            <div class="cell col-3 col-xl-3">Registre de métadonnées ou fichiers de données</div>
            <div class="cell col-6 col-xl-6">Dans le tableau de bord, cliquer sur le bouton <b>Éditer</b> à côté du titre du jeu de données, puis apporter les changements voulus.</div>
        </div>
        <div class="row pt-2 pb-2 ml-0 mr-0">
            <div class="cell col-3 col-xl-3">En curation</div>
            <div class="cell col-3 col-xl-3">Registre de métadonnées ou fichiers de données</div>
            <div class="cell col-6 col-xl-6">Écrire à <a href="mailto:support@frdr-dfdr.ca">support@frdr-dfdr.ca</a>; l’équipe de service du DFDR vous renverra votre soumission ou apportera pour vous les changements demandés.</div>
        </div>
        <div class="row pt-2 pb-2 ml-0 mr-0">
            <div class="cell col-3 col-xl-3">Sous embargo (ou en examen à l’externe)</div>
            <div class="cell col-3 col-xl-3">Registre de métadonnées ou fichiers de données</div>
            <div class="cell col-6 col-xl-6">Écrire à <a href="mailto:support@frdr-dfdr.ca">support@frdr-dfdr.ca</a>; l’équipe de service du DFDR travaillera avec vous pour apporter les changements voulus.</div>
        </div>
        <div class="row pt-2 pb-2 ml-0 mr-0">
            <div class="cell col-3 col-xl-3">Publié (publiquement accessible)</div>
            <div class="cell col-3 col-xl-3">Registre de métadonnées</div>
            <div class="cell col-6 col-xl-6">Écrire à <a href="mailto:support@frdr-dfdr.ca">support@frdr-dfdr.ca</a> l’équipe de service du DFDR apportera pour vous les changements demandés.</div>
        </div>
        <div class="row pt-2 pb-2 ml-0 mr-0">
            <div class="cell col-3 col-xl-3">Publié (publiquement accessible)</div>
            <div class="cell col-3 col-xl-3">Fichiers de données</div>
            <div class="cell col-6 col-xl-6">Dans le tableau de bord, cliquez sur le bouton <b>Créer une version du jeu de données</b>, sous « Actions ». Le DFDR crée alors une copie de votre jeu de données que vous pouvez remanier directement. Une fois vos révisions faites, cliquez sur Terminer afin de soumettre la nouvelle version pour examen (curation) et publication.</div>
        </div>
    </div>
</div>

<div class="card-shadow mb-3">
    <div class="card-body">
        <h2 id="creer-une-nouvelle-version">Créer une nouvelle version</h2>

        <div class="mb-3">
            Pour créer une nouvelle version d’un jeu de données publié, vous pouvez passer par votre <a href="/repo/PublishDashboard">tableau de bord</a> ou par la page d’accueil du jeu de données. Dans les deux cas, vous devez ouvrir une session avec votre compte du DFDR. Sur votre <a href="/repo/PublishDashboard">tableau de bord</a>, trouvez le jeu de données à modifier dans la liste des jeux publiés, puis cliquez sur « Créer » sous le menu « Actions ».
        </div>

        <div>
            <div class="fake-browser"><span class="fake-controls"><i class="fas fa-circle mac-close"></i><i class="fas fa-circle mac-minimize"></i><i class="fas fa-circle mac-maximize"></i></span></div>
            <img src="/docs/img/screenshots/creer_une_nouvelle_version/create-new-version-publication-dashboard-fr.png" alt="Screenshot showing button to create a new version of a dataset on the Publication Dashboard" class="screenshot"/>
        </div>

        <div class="mb-3">
            Ou encore, cliquez sur le bouton <strong>Créer une version du jeu de données</strong> tout en bas de la page d’accueil du jeu de données concerné.
        </div>

        <div>
            <div class="fake-browser"><span class="fake-controls"><i class="fas fa-circle mac-close"></i><i class="fas fa-circle mac-minimize"></i><i class="fas fa-circle mac-maximize"></i></span></div>
            <img src="/docs/img/screenshots/creer_une_nouvelle_version/create-new-version-landing-page-fr.png" alt="Screenshot showing button to create a new version of a dataset on the landing page." class="screenshot"/>
        </div>
    </div>
</div>

<div class="card-shadow mb-3">
    <div class="card-body">
        <h2 id="ajouter-un-resume-public-des-changements">Ajouter un résumé public des changements</h2>

        <div class="mb-3">
            Il est recommandé d’ajouter un résumé public des changements pour chaque nouvelle version. Ce résumé figure ensuite dans l’historique des versions et sert à retracer les différences entre chacune. Expliquez quels fichiers ont été ajoutés, retirés ou significativement modifiés dans la nouvelle version. Le résumé est limité à 2 000 caractères; pour décrire les changements plus en détail, vous pouvez annexer au jeu de données un fichier d’historique ou un journal des changements, ou encore étoffer le fichier README.
        </div>


        <div class="mb-3">
            Lorsque votre résumé est terminé, cliquez sur le bouton <strong>Créer une version du jeu de données</strong> pour passer à l’étape suivante.
        </div>

        <div class="mb-3">
            Le DFDR peut prendre plus ou moins de temps pour recopier votre jeu de données en une nouvelle version, selon la taille et la complexité de celui-ci. Le système ne permet aucune révision avant que la copie soit terminée et donc prête à être modifiée, auquel moment vous recevrez un courriel. Si vous avez des questions, ou si le système prend plus de temps que prévu pour copier votre jeu de données, écrivez-nous à <a href="mailto:support@frdr-dfdr.ca">support@frdr-dfdr</a>.
        </div>
    </div>
</div>

<div class="card-shadow mb-3">
    <div class="card-body">
        <h2 id="modifier-les-metadonnees">Modifier les métadonnées</h2>

        <div class="mb-3">
            Pour ce faire, il faut remplir le même formulaire de soumission de métadonnées que la première fois. Par défaut, toutes les métadonnées publiées sont recopiées dans la nouvelle version. On peut toutefois en ajouter, en modifier ou en retirer, ou encore sauter cette étape et passer directement à l’onglet de transfert de données pour mettre à jour les fichiers de données.
        </div>

        <div class="mb-3">
            <strong>Si les changements ne concernent que les métadonnées (ex. : lien vers un article publié, ordre des auteurs, amélioration de la description du jeu de données), écrivez-nous à [support@frdr-dfdr.ca](mailto:support@frdr-dfdr.ca) : une curatrice ou un curateur vous aidera à les apporter, et ce, sans créer de nouvelle version.</strong>
        </div>
    </div>
</div>

<div class="card-shadow mb-3">
    <div class="card-body">
        <h2 id="modifier-des-fichiers">Modifier des fichiers</h2>

        <div class="mb-3">
            Quand on crée une nouvelle version, le DFDR recopie automatiquement l’ensemble des fichiers du jeu de données : vous pouvez alors modifier ces fichiers provisoires en toute sécurité, sans altérer la version publiée. Par exemple, vous pouvez ajouter des fichiers, supprimer ceux qui sont désuets et écraser ceux qui ont une nouvelle version. Si un fichier n’a pas à être retouché, il suffit de le laisser tel quel qu’il figure à la fois dans la nouvelle et dans la précédente version de votre jeu de données.
        </div>

        <div class="mb-3">
            Si vous souhaitez modifier un grand nombre de fichiers, nous vous recommandons de tirer parti des fonctionnalités de transfert de Globus. Celles-ci se trouvent sous « Transfert et options de timer » à l’écran du Gestionnaire de fichiers. Par exemple, vous pouvez choisir de transférer dans le DFDR seulement les fichiers qui ont été ajoutés ou modifiés par rapport à la source (votre copie locale). Ou encore, vous pouvez indiquer de supprimer dans la destination (nouvelle version dans le DFDR) les fichiers qui n’existent pas dans la source (votre copie locale). Pour obtenir davantage d’information sur le transfert de données dans le DFDR, consultez la section <a href="/docs/fr/déposer_les_données">Déposer les données</a> de notre documentation dans Globus ou les guides dans <a href="https://docs.globus.org/guides/tutorials/manage-files/transfer-files/">Globus docs</a>.
        </div>

        <div class="mb-3">
            Le DFDR peut prendre plus ou moins de temps pour recopier votre jeu de données en une nouvelle version, selon la taille et la complexité de celui-ci. Le système ne permet aucune révision avant que la copie soit terminée et donc prête à être modifiée, auquel moment vous recevrez un courriel. Si vous avez des questions, ou si le système prend plus de temps que prévu pour copier votre jeu de données, écrivez-nous à <a href="mailto:support@frdr-dfdr">support@frdr-dfdr.ca</a>.
        </div>

        <div class="mb-3">
            *Avant d’apporter un nombre important de changements dans un jeu de données massif, veuillez écrire à l’équipe de service du DFDR à <a href="mailto:support@frdr-dfdr.ca">support@frdr-dfdr.ca</a>; elle se fera un plaisir de vous conseiller sur la meilleure façon de s’y prendre.
        </div>
    </div>
</div>

<div class="card-shadow mb-3">
    <div class="card-body">
        <h2 id="verifier-et-terminer-votre-nouvelle-version">Vérifier et terminer votre nouvelle version</h2>

        <div class="mb-3">
            Après avoir mis à jour votre ensemble de fichiers, vérifiez que tout est en ordre, puis cliquez sur le bouton <strong>Terminer</strong> pour envoyer le nouveau jeu de données à l’équipe de curation du DFDR. Notre système comparera les nouveaux fichiers aux anciens afin de produire une liste des changements à l’intention de la curatrice ou du curateur, qui pourrait alors vous communiquer des questions ou des recommandations avant d’approuver la publication de la nouvelle version.
        </div>

        <div class="mb-3">
            Quand cette nouvelle version sera publiée, son numéro et le résumé des changements connexe figureront dans un tableau des versions public. La page des données de l’ancienne version comportera aussi un avis indiquant qu’une version plus récente est disponible, en plus d’un lien vers celle-ci.
        </div>

        <div class="mb-3">
            Si vous avez des questions sur le processus de versionnage, écrivez-nous à <a href="mailto:support@frdr-dfdr">support@frdr-dfdr.ca</a>.
        </div>
    </div>
</div>
